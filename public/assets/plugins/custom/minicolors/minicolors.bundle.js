!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}((function(i){"use strict";function t(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(i).remove()}function a(i){var t=i.parent(),a=t.find(".minicolors-panel"),s=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(o(),t.addClass("minicolors-focus"),a.animate?a.stop(!0,!0).fadeIn(s.showSpeed,(function(){s.show&&s.show.call(i.get(0))})):(a.show(),s.show&&s.show.call(i.get(0))))}function o(){i(".minicolors-focus").each((function(){var t=i(this),a=t.find(".minicolors-input"),o=t.find(".minicolors-panel"),s=a.data("minicolors-settings");o.animate?o.fadeOut(s.hideSpeed,(function(){s.hide&&s.hide.call(a.get(0)),t.removeClass("minicolors-focus")})):(o.hide(),s.hide&&s.hide.call(a.get(0)),t.removeClass("minicolors-focus"))}))}function s(i,t,a){var o,s,r,e,c,l=i.parents(".minicolors").find(".minicolors-input"),h=l.data("minicolors-settings"),d=i.find("[class$=-picker]"),p=i.offset().left,u=i.offset().top,g=Math.round(t.pageX-p),m=Math.round(t.pageY-u),f=a?h.animationSpeed:0;t.originalEvent.changedTouches&&(g=t.originalEvent.changedTouches[0].pageX-p,m=t.originalEvent.changedTouches[0].pageY-u),g<0&&(g=0),m<0&&(m=0),g>i.width()&&(g=i.width()),m>i.height()&&(m=i.height()),i.parent().is(".minicolors-slider-wheel")&&d.parent().is(".minicolors-grid")&&(o=75-g,s=75-m,r=Math.sqrt(o*o+s*s),(e=Math.atan2(s,o))<0&&(e+=2*Math.PI),r>75&&(r=75,g=75-75*Math.cos(e),m=75-75*Math.sin(e)),g=Math.round(g),m=Math.round(m)),c={top:m+"px"},i.is(".minicolors-grid")&&(c.left=g+"px"),d.animate?d.stop(!0).animate(c,f,h.animationEasing,(function(){n(l,i)})):(d.css(c),n(l,i))}function n(i,t){function a(i,t){var a,o;return i.length&&t?(a=i.offset().left,o=i.offset().top,{x:a-t.offset().left+i.outerWidth()/2,y:o-t.offset().top+i.outerHeight()/2}):null}var o,s,n,e,l,h,d,p=i.val(),g=i.attr("data-opacity"),m=i.parent(),f=i.data("minicolors-settings"),v=m.find(".minicolors-input-swatch"),w=m.find(".minicolors-grid"),y=m.find(".minicolors-slider"),C=m.find(".minicolors-opacity-slider"),k=w.find("[class$=-picker]"),M=y.find("[class$=-picker]"),x=C.find("[class$=-picker]"),S=a(k,w),$=a(M,y),I=a(x,C);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(f.control){case"wheel":e=w.width()/2-S.x,l=w.height()/2-S.y,h=Math.sqrt(e*e+l*l),(d=Math.atan2(l,e))<0&&(d+=2*Math.PI),h>75&&(h=75,S.x=69-75*Math.cos(d),S.y=69-75*Math.sin(d)),s=u(h/.75,0,100),p=b({h:o=u(180*d/Math.PI,0,360),s:s,b:n=u(100-Math.floor($.y*(100/y.height())),0,100)}),y.css("backgroundColor",b({h:o,s:s,b:100}));break;case"saturation":p=b({h:o=u(parseInt(S.x*(360/w.width()),10),0,360),s:s=u(100-Math.floor($.y*(100/y.height())),0,100),b:n=u(100-Math.floor(S.y*(100/w.height())),0,100)}),y.css("backgroundColor",b({h:o,s:100,b:n})),m.find(".minicolors-grid-inner").css("opacity",s/100);break;case"brightness":p=b({h:o=u(parseInt(S.x*(360/w.width()),10),0,360),s:s=u(100-Math.floor(S.y*(100/w.height())),0,100),b:n=u(100-Math.floor($.y*(100/y.height())),0,100)}),y.css("backgroundColor",b({h:o,s:s,b:100})),m.find(".minicolors-grid-inner").css("opacity",1-n/100);break;default:p=b({h:o=u(360-parseInt($.y*(360/y.height()),10),0,360),s:s=u(Math.floor(S.x*(100/w.width())),0,100),b:n=u(100-Math.floor(S.y*(100/w.height())),0,100)}),w.css("backgroundColor",b({h:o,s:100,b:100}))}r(i,p,g=f.opacity?parseFloat(1-I.y/C.height()).toFixed(2):1)}else v.find("span").css({backgroundColor:p,opacity:String(g)}),c(i,p,g)}function r(i,t,a){var o,s=i.parent(),n=i.data("minicolors-settings"),r=s.find(".minicolors-input-swatch");n.opacity&&i.attr("data-opacity",a),"rgb"===n.format?(o=g(t)?d(t,!0):w(h(t,!0)),a=""===i.attr("data-opacity")?1:u(parseFloat(i.attr("data-opacity")).toFixed(2),0,1),!isNaN(a)&&n.opacity||(a=1),t=i.minicolors("rgbObject").a<=1&&o&&n.opacity?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(a)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):(g(t)&&(t=f(t)),t=l(t,n.letterCase)),i.val(t),r.find("span").css({backgroundColor:t,opacity:String(a)}),c(i,t,a)}function e(t,a){var o,s,n,r,e,v,y,C,k,M,x=t.parent(),S=t.data("minicolors-settings"),$=x.find(".minicolors-input-swatch"),I=x.find(".minicolors-grid"),z=x.find(".minicolors-slider"),F=x.find(".minicolors-opacity-slider"),T=I.find("[class$=-picker]"),D=z.find("[class$=-picker]"),j=F.find("[class$=-picker]");switch(g(t.val())?(o=f(t.val()),(e=u(parseFloat(m(t.val())).toFixed(2),0,1))&&t.attr("data-opacity",e)):o=l(h(t.val(),!0),S.letterCase),o||(o=l(p(S.defaultValue,!0),S.letterCase)),s=function(i){var t=function(i){var t={h:0,s:0,b:0},a=Math.min(i.r,i.g,i.b),o=Math.max(i.r,i.g,i.b),s=o-a;t.b=o,t.s=0!==o?255*s/o:0,0!==t.s?i.r===o?t.h=(i.g-i.b)/s:i.g===o?t.h=2+(i.b-i.r)/s:t.h=4+(i.r-i.g)/s:t.h=-1;t.h*=60,t.h<0&&(t.h+=360);return t.s*=100/255,t.b*=100/255,t}(w(i));0===t.s&&(t.h=360);return t}(o),r=S.keywords?i.map(S.keywords.split(","),(function(i){return i.toLowerCase().trim()})):[],v=""!==t.val()&&i.inArray(t.val().toLowerCase(),r)>-1?l(t.val()):g(t.val())?d(t.val()):o,a||t.val(v),S.opacity&&(n=""===t.attr("data-opacity")?1:u(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(n)&&(n=1),t.attr("data-opacity",n),$.find("span").css("opacity",String(n)),C=u(F.height()-F.height()*n,0,F.height()),j.css("top",C+"px")),"transparent"===t.val().toLowerCase()&&$.find("span").css("opacity",String(0)),$.find("span").css("backgroundColor",o),S.control){case"wheel":k=u(Math.ceil(.75*s.s),0,I.height()/2),M=s.h*Math.PI/180,y=u(75-Math.cos(M)*k,0,I.width()),C=u(75-Math.sin(M)*k,0,I.height()),T.css({top:C+"px",left:y+"px"}),C=150-s.b/(100/I.height()),""===o&&(C=0),D.css("top",C+"px"),z.css("backgroundColor",b({h:s.h,s:s.s,b:100}));break;case"saturation":y=u(5*s.h/12,0,150),C=u(I.height()-Math.ceil(s.b/(100/I.height())),0,I.height()),T.css({top:C+"px",left:y+"px"}),C=u(z.height()-s.s*(z.height()/100),0,z.height()),D.css("top",C+"px"),z.css("backgroundColor",b({h:s.h,s:100,b:s.b})),x.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":y=u(5*s.h/12,0,150),C=u(I.height()-Math.ceil(s.s/(100/I.height())),0,I.height()),T.css({top:C+"px",left:y+"px"}),C=u(z.height()-s.b*(z.height()/100),0,z.height()),D.css("top",C+"px"),z.css("backgroundColor",b({h:s.h,s:s.s,b:100})),x.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:y=u(Math.ceil(s.s/(100/I.width())),0,I.width()),C=u(I.height()-Math.ceil(s.b/(100/I.height())),0,I.height()),T.css({top:C+"px",left:y+"px"}),C=u(z.height()-s.h/(360/z.height()),0,z.height()),D.css("top",C+"px"),I.css("backgroundColor",b({h:s.h,s:100,b:100}))}t.data("minicolors-initialized")&&c(t,v,n)}function c(i,t,a){var o,s,n,r=i.data("minicolors-settings"),e=i.data("minicolors-lastChange");if(!e||e.value!==t||e.opacity!==a){if(i.data("minicolors-lastChange",{value:t,opacity:a}),r.swatches&&0!==r.swatches.length){for(o=g(t)?d(t,!0):w(t),s=-1,n=0;n<r.swatches.length;++n)if(o.r===r.swatches[n].r&&o.g===r.swatches[n].g&&o.b===r.swatches[n].b&&o.a===r.swatches[n].a){s=n;break}i.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==s&&i.parent().find(".minicolors-swatches .minicolors-swatch").eq(n).addClass("selected")}r.change&&(r.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout((function(){r.change.call(i.get(0),t,a)}),r.changeDelay))):r.change.call(i.get(0),t,a)),i.trigger("change").trigger("input")}}function l(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function h(i,t){return(i=i.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)?3!==i.length&&6!==i.length?"":(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i):""}function d(i,t){var a=i.replace(/[^\d,.]/g,"").split(",");return a[0]=u(parseInt(a[0],10),0,255),a[1]=u(parseInt(a[1],10),0,255),a[2]=u(parseInt(a[2],10),0,255),void 0!==a[3]&&(a[3]=u(parseFloat(a[3],10),0,1)),t?void 0!==a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:void 0!==a[3]&&a[3]<=1?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function p(i,t){return g(i)?d(i):h(i,t)}function u(i,t,a){return i<t&&(i=t),i>a&&(i=a),i}function g(i){var t=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!t||4!==t.length)}function m(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===i.length?i[4]:"1"}function f(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}function v(t){var a=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return i.each(a,(function(i,t){1===t.length&&(a[i]="0"+t)})),"#"+a.join("")}function b(i){return v(function(i){var t={},a=Math.round(i.h),o=Math.round(255*i.s/100),s=Math.round(255*i.b/100);if(0===o)t.r=t.g=t.b=s;else{var n=s,r=(255-o)*s/255,e=a%60*(n-r)/60;360===a&&(a=0),a<60?(t.r=n,t.b=r,t.g=r+e):a<120?(t.g=n,t.b=r,t.r=n-e):a<180?(t.g=n,t.r=r,t.b=r+e):a<240?(t.b=n,t.r=r,t.g=n-e):a<300?(t.b=n,t.g=r,t.r=r+e):a<360?(t.r=n,t.g=r,t.b=n-e):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}(i))}function w(i){return{r:(i=parseInt(i.indexOf("#")>-1?i.substring(1):i,16))>>16,g:(65280&i)>>8,b:255&i}}i.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}},i.extend(i.fn,{minicolors:function(s,n){switch(s){case"destroy":return i(this).each((function(){t(i(this))})),i(this);case"hide":return o(),i(this);case"opacity":return void 0===n?i(this).attr("data-opacity"):(i(this).each((function(){e(i(this).attr("data-opacity",n))})),i(this));case"rgbObject":return function(t){var a,o=i(t).attr("data-opacity");if(g(i(t).val()))a=d(i(t).val(),!0);else{a=w(h(i(t).val(),!0))}if(!a)return null;void 0!==o&&i.extend(a,{a:parseFloat(o)});return a}(i(this));case"rgbString":case"rgbaString":return function(t,a){var o,s=i(t).attr("data-opacity");if(g(i(t).val()))o=d(i(t).val(),!0);else{o=w(h(i(t).val(),!0))}if(!o)return null;void 0===s&&(s=1);return a?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(s)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"}(i(this),"rgbaString"===s);case"settings":return void 0===n?i(this).data("minicolors-settings"):(i(this).each((function(){var a=i(this).data("minicolors-settings")||{};t(i(this)),i(this).minicolors(i.extend(!0,a,n))})),i(this));case"show":return a(i(this).eq(0)),i(this);case"value":return void 0===n?i(this).val():(i(this).each((function(){"object"==typeof n&&null!==n?(void 0!==n.opacity&&i(this).attr("data-opacity",u(n.opacity,0,1)),n.color&&i(this).val(n.color)):i(this).val(n),e(i(this))})),i(this));default:return"create"!==s&&(n=s),i(this).each((function(){!function(t,a){var o,s,n,r,c,l,p,u=i('<div class="minicolors" />'),m=i.minicolors.defaults;if(t.data("minicolors-initialized"))return;a=i.extend(!0,{},m,a),u.addClass("minicolors-theme-"+a.theme).toggleClass("minicolors-with-opacity",a.opacity),void 0!==a.position&&i.each(a.position.split(" "),(function(){u.addClass("minicolors-position-"+this)}));s="rgb"===a.format?a.opacity?"25":"20":a.keywords?"11":"7";t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",a).prop("size",s).wrap(u).after('<div class="minicolors-panel minicolors-slider-'+a.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),a.inline||(t.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-input-swatch").on("click",(function(i){i.preventDefault(),t.trigger("focus")})));if((l=t.parent().find(".minicolors-panel")).on("selectstart",(function(){return!1})).end(),a.swatches&&0!==a.swatches.length)for(l.addClass("minicolors-with-swatches"),n=i('<ul class="minicolors-swatches"></ul>').appendTo(l),p=0;p<a.swatches.length;++p)"object"==typeof a.swatches[p]?(o=a.swatches[p].name,r=a.swatches[p].color):(o="",r=a.swatches[p]),c=r,r=g(r)?d(r,!0):w(h(r,!0)),i('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').attr("title",o).appendTo(n).data("swatch-color",c).find(".minicolors-swatch-color").css({backgroundColor:"transparent"!==c?v(r):"transparent",opacity:String(r.a)}),a.swatches[p]=r;a.inline&&t.parent().addClass("minicolors-inline");e(t,!1),t.data("minicolors-initialized",!0)}(i(this),n)})),i(this)}}}),i([document]).on("mousedown.minicolors touchstart.minicolors",(function(t){i(t.target).parents().add(t.target).hasClass("minicolors")||o()})).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",(function(t){var a=i(this);t.preventDefault(),i(t.delegateTarget).data("minicolors-target",a),s(a,t,!0)})).on("mousemove.minicolors touchmove.minicolors",(function(t){var a=i(t.delegateTarget).data("minicolors-target");a&&s(a,t)})).on("mouseup.minicolors touchend.minicolors",(function(){i(this).removeData("minicolors-target")})).on("click.minicolors",".minicolors-swatches li",(function(t){t.preventDefault();var a=i(this),o=a.parents(".minicolors").find(".minicolors-input"),s=a.data("swatch-color");r(o,s,m(s)),e(o)})).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",(function(t){var o=i(this).parent().find(".minicolors-input");t.preventDefault(),a(o)})).on("focus.minicolors",".minicolors-input",(function(){var t=i(this);t.data("minicolors-initialized")&&a(t)})).on("blur.minicolors",".minicolors-input",(function(){var t,a,o,s,n,r=i(this),e=r.data("minicolors-settings");r.data("minicolors-initialized")&&(t=e.keywords?i.map(e.keywords.split(","),(function(i){return i.toLowerCase().trim()})):[],n=""!==r.val()&&i.inArray(r.val().toLowerCase(),t)>-1?r.val():null===(o=g(r.val())?d(r.val(),!0):(a=h(r.val(),!0))?w(a):null)?e.defaultValue:"rgb"===e.format?e.opacity?d("rgba("+o.r+","+o.g+","+o.b+","+r.attr("data-opacity")+")"):d("rgb("+o.r+","+o.g+","+o.b+")"):v(o),s=e.opacity?r.attr("data-opacity"):1,"transparent"===n.toLowerCase()&&(s=0),r.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",String(s)),r.val(n),""===r.val()&&r.val(p(e.defaultValue,!0)),r.val(l(r.val(),e.letterCase)))})).on("keydown.minicolors",".minicolors-input",(function(t){var a=i(this);if(a.data("minicolors-initialized"))switch(t.which){case 9:o();break;case 13:case 27:o(),a.blur()}})).on("keyup.minicolors",".minicolors-input",(function(){var t=i(this);t.data("minicolors-initialized")&&e(t,!0)})).on("paste.minicolors",".minicolors-input",(function(){var t=i(this);t.data("minicolors-initialized")&&setTimeout((function(){e(t,!0)}),1)}))})),$("input.color").each((function(){$(this).minicolors({control:$(this).attr("data-control")||"hue",defaultValue:$(this).attr("data-defaultValue")||"",format:$(this).attr("data-format")||"hex",keywords:$(this).attr("data-keywords")||"",inline:"true"===$(this).attr("data-inline"),letterCase:$(this).attr("data-letterCase")||"lowercase",opacity:$(this).attr("data-opacity"),position:$(this).attr("data-position")||"bottom",swatches:$(this).attr("data-swatches")?$(this).attr("data-swatches").split("|"):[],change:function(i,t){i&&t&&(i+=", "+t)},theme:"bootstrap"})}));
